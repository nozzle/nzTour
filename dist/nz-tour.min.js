!function(){function t(e){return angular.forEach(arguments,function(o){o!==e&&angular.forEach(o,function(o,r){e[r]&&e[r].constructor&&e[r].constructor===Object?t(e[r],o):e[r]=o})}),e}function e(t,e,o,n){t[_removeEventListener](a+e,"wheel"==s?o:r,n||!1)}function o(t,e,o,n){t[i](a+e,"wheel"==s?o:r,n||!1)}function r(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==s?(e.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-.025*t.wheelDeltaX)):e.deltaY=t.detail,callback(e)}var n=angular.module("nzTour",[]);if(n.factory("nzTour",["$q","$rootScope","$compile","$timeout",function(e,o,r,n){function i(t){return t||e.reject("No Tour Specified!"),t.steps.length||e.reject("No steps were found in that tour!"),T.current?s().then(function(){return u(t)}):u(t)}function s(){return m(0).then(function(){return g(!1)}).then(function(){var t=T.current.tour.config.onClose;return T.current=!1,!t||t()})}function a(){T.current&&x()}function l(){return T.current||T.current.reject(),m(1).then(w).then(function(){return T.current.step++,1}).then(h)}function f(){return m(-1).then(function(){return T.current.step>0?(T.current.step--,-1):e.reject(null)}).then(h)}function c(t){return t>0&&t<=T.current.tour.steps.length?m(0).then(function(){return T.current.step=t-1,0}).then(h):e.reject("Requested step not defined")}function u(o){o.config=t({},T.config,o.config);var r=function(t){if(!angular.isArray(t))return!1;for(var e=0;e<t.length;e+=1)if(T.config.placementPriority.indexOf(t[e])===-1)return!1;return!0};return r(o.config.placementPriority)||(o.config.placementPriority=T.config.placementPriority),angular.forEach(o.steps,function(t){t.placementPriority&&(r(t.placementPriority)||delete t.placementPriority)}),T.current={tour:o,step:0,promise:e.defer()},g(!0,o),h()}function g(t,o){return t?(T.box=angular.element(r('<nz-tour class="hidden"></nz-tour>')(T)),angular.element(T.body).append(T.box),T.box.removeClass("hidden"),e.when()):(T.box.addClass("hidden"),n(function(){T.cleanup()},T.current.tour.config.animationDuration))}function h(t){return d(t).then(p)}function d(t){return T.current.tour.steps[T.current.step].before?T.current.tour.steps[T.current.step].before(t):e.when(null)}function p(){return T.$broadcast("step",T.current.step),e.when(null)}function m(t){return T.current.tour.steps[T.current.step].after?T.current.tour.steps[T.current.step].after(t):e.when(null)}function w(){return T.current.step===T.current.tour.steps.length-1?v().then(function(){return e.reject("No more steps left")}):e.when(null)}function v(){return g(!1).then(function(){var t=T.current.tour.config.onComplete;return T.current=!1,!t||t()})}function x(){}function b(t,e){var o=!1;return function(){o||(t.call(),o=!0,n(function(){o=!1},e))}}function k(t,e,o){var r;return function(){var n=this,i=arguments,s=function(){r=null,o||t.apply(n,i)},a=o&&!r;clearTimeout(r),r=setTimeout(s,e),a&&t.apply(n,i)}}var T=o.$new();return angular.extend(T,{config:{mask:{visible:!0,visibleOnNoTarget:!1,clickThrough:!1,clickExit:!1,scrollThrough:!0,color:"rgba(0,0,0,.7)"},dark:!1,scrollBox:navigator.userAgent.indexOf("AppleWebKit")!=-1?"body":"html",previousText:"Previous",nextText:"Next",finishText:"Finish",animationDuration:400,placementPriority:["bottom","right","top","left"],disableHotkeys:!1,showPrevious:!0,showNext:!0},current:!1,body:angular.element("body"),box:!1,start:i,stop:s,pause:a,next:l,previous:f,gotoStep:c,throttle:b,debounce:k}),window.nzTour=T,T}]),n.directive("nzTour",["$q","$compile",function(t,e){return{template:['<div id="nzTour-box-wrap">','   <div id="nzTour-box">','        <div id="nzTour-tip" class="top center"></div>','        <div id="nzTour-step">{{view.step + 1}}</div>','        <div id="nzTour-length">{{view.length}}</div>','        <div id="nzTour-close" ng-click="stop()">&#10005</div>','        <div id="nzTour-content">','           <div id="nzTour-inner-content"></div>',"        </div>",'        <div id="nzTour-actions">','            <button id="nzTour-previous" ng-show="view.step > 0 && view.showPrevious" ng-click="previous()">{{view.previousText}}</button>','            <button id="nzTour-next" ng-show="view.step >= 0 && view.showNext" ng-click="next()" class="success">{{view.nextText}}</button>',"        </div>","    </div>","</div>",'<div class="nzTour-masks" ng-show="current.tour.config.mask.visible" ng-click="tryStop()">','    <div class="mask top" ng-style="{\'background-color\': current.tour.config.mask.color}"></div>','    <div class="mask right" ng-style="{\'background-color\': current.tour.config.mask.color}"></div>','    <div class="mask bottom" ng-style="{\'background-color\': current.tour.config.mask.color}"></div>','    <div class="mask left" ng-style="{\'background-color\': current.tour.config.mask.color}"></div>','    <div class="mask center"></div>',"</div>"].join(" "),link:function(o,r){function n(t){if(t.which>=49&&t.which<=57)return void o.gotoStep(t.which-48);switch(t.which){case 37:return o.previous(),void f(t);case 39:return o.next(),void f(t);case 27:if(!b.disableEscExit)return o.stop(),void f(t);case 38:case 40:return void L()}}function i(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}function s(t){var e=M.masks_top.add(M.masks_right).add(M.masks_bottom).add(M.masks_left);t?(P=!0,e.css("transition","all "+b.animationDuration+"ms ease")):(P=!1,e.css("transition","all 0"))}function a(t){var e=M.wrap.add(M.box).add(M.tip);t?e.css("transition","all "+b.animationDuration+"ms ease"):e.css("transition","all 0")}function l(t){var e;e="DOMMouseScroll"==t.type?t.detail*-40:t.wheelDelta;var o=e>0,r=M.content.scrollTop();return o&&!r?f(t):o||M.innerContent.height()-M.content.height()!=r?void 0:f(t)}function f(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}function c(){T||(_=!0,s(!1),S(),h(E).then(d).then(p).then(d).then(w))}function u(){_=!1,s(!0)}function g(t,r){M.target=!1;var n=o.current.tour.steps;E=r,o.view={step:r,length:n.length,previousText:b.previousText,nextText:r==n.length-1?b.finishText:b.nextText,showNext:void 0===n[r].showNext?b.showNext:n[r].showNext,showPrevious:void 0===n[r].showPrevious?b.showPrevious:n[r].showPrevious};var i=n[r].content,s=e(i)(o);return M.innerContent.html(s),M.content.scrollTop(0),T=!0,h(r).then(d).then(p).then(d).then(w).then(function(){T=!1})}function h(e){var r=t.defer();if(M.target)r.resolve(k);else{var n=angular.element(o.current.tour.steps[e].target);n.length?(M.target=angular.element(n[0]),r.resolve(M.target)):r.resolve(!1)}return r.promise}function d(){return M.target?(D.window={width:M.window.width(),height:M.window.height()},D.scroll={width:M.scroll.outerWidth(),height:M.scroll.outerHeight(),offset:M.scroll.offset(),scroll:{top:M.scroll.scrollTop(),left:M.scroll.scrollLeft()}},angular.forEach(D.scroll.offset,function(t,e){D.scroll.offset[e]=Math.ceil(t)}),D.scroll.height=D.scroll.height+D.scroll.offset.top>D.window.height?D.window.height:D.scroll.height,D.scroll.width=D.scroll.width+D.scroll.offset.left>D.window.width?D.window.width:D.scroll.width,D.scroll.offset.toBottom=D.scroll.height+D.scroll.offset.top,D.scroll.offset.toRight=D.scroll.width+D.scroll.offset.left,D.scroll.offset.fromBottom=D.window.height-D.scroll.offset.top-D.scroll.height,D.scroll.offset.fromRight=D.window.width-D.scroll.offset.left-D.scroll.width,D.target={width:M.target.outerWidth(),height:M.target.outerHeight(),offset:M.target.offset()},"body"!=b.scrollBox&&"html"!=b.scrollBox||(D.target.offset.top-=D.scroll.scroll.top),angular.forEach(D.target.offset,function(t,e){D.target.offset[e]=Math.ceil(t)}),D.target.offset.toBottom=D.target.offset.top+D.target.height,D.target.offset.toRight=D.target.offset.left+D.target.width,D.target.offset.fromBottom=D.window.height-D.target.offset.top-D.target.height,D.target.offset.fromRight=D.window.width-D.target.offset.left-D.target.width,D.target.margins={offset:{top:D.target.offset.top-z,left:D.target.offset.left-z,toBottom:D.target.offset.toBottom+z,toRight:D.target.offset.toRight+z,fromBottom:D.target.offset.fromBottom-z,fromRight:D.target.offset.fromRight-z},height:D.target.height+2*z,right:D.target.offset.fromRight+2*z},t.when(null)):t.when(null)}function p(){if(!M.target)return t.when(null);var e=m(),o=t.defer();return e?M.scroll.animate({scrollTop:e},_?0:b.animationDuration,function(){o.resolve()}):o.resolve(),o.promise}function m(){return D.target.margins.height>D.scroll.height?D.target.offset.toBottom-B<D.scroll.offset.top?D.scroll.scroll.top-(D.scroll.offset.top-(D.target.offset.toBottom-B)):D.target.offset.top+B>D.scroll.offset.toBottom&&D.scroll.scroll.top+(D.target.offset.top+B-D.scroll.offset.toBottom):D.target.margins.offset.top<D.scroll.offset.top?D.scroll.scroll.top-(D.scroll.offset.top-D.target.margins.offset.top):D.target.margins.offset.toBottom>D.scroll.offset.toBottom&&D.scroll.scroll.top+(D.target.margins.offset.toBottom-D.scroll.offset.toBottom)}function w(){return t.all([v(),x()])}function v(){function e(){return D.target.margins.offset.fromBottom>B&&(D.target.width>y?(s("bottom","center"),!0):D.target.offset.fromRight+D.target.width>y?(s("bottom","left"),!0):(s("bottom","right"),!0))}function r(){return D.target.margins.offset.fromRight>y&&(D.target.margins.height>D.scroll.height?D.target.offset.top>D.window.height/2?(a("right","top"),!0):D.target.offset.fromBottom>D.window.height/2?(a("right","bottom"),!0):(a("right","center",!0),!0):D.target.height>B?(a("right","center"),!0):D.target.offset.fromBottom+D.target.height>B?(a("right","top"),!0):(a("right","bottom"),!0))}function n(){return D.target.margins.offset.left>y&&(D.target.margins.height>D.scroll.height?(a("left","center",!0),!0):D.target.height>B?(a("left","center"),!0):D.target.offset.fromBottom+D.target.height>B?(a("left","top"),!0):(a("left","bottom"),!0))}function i(){return D.target.margins.offset.top>B&&(D.target.width>y?(s("top","center"),!0):D.target.offset.fromRight+D.target.width>y?(s("top","left"),!0):(s("top","right"),!0))}function s(t,e){var o,r,n,i,s;"top"==t?(o=D.target.margins.offset.top,s="bottom",i="-100%"):(o=D.target.margins.offset.toBottom,s="top",i="0"),"right"==e?(r=D.target.offset.toRight,n="-100%"):"center"==e?(r=D.target.offset.left+D.target.width/2,n="-50%"):(r=D.target.offset.left,n="0"),M.wrap.css({left:r+"px",top:o+"px",transform:"translate("+n+","+i+")"}),M.tip.attr("class","vertical "+s+" "+e)}function a(t,e,o){var r,n,i,s,a;"right"==t?(n=D.target.margins.offset.toRight,a="left",i="0"):(n=D.target.margins.offset.left,a="right",i="-100%"),o?(r=D.window.height/2,s="-50%"):"top"==e?(r=D.target.offset.top,s="0"):"center"==e?(r=D.target.offset.top+D.target.height/2,s="-50%"):(r=D.target.offset.toBottom,s="-100%"),M.wrap.css({left:n+"px",top:r+"px",transform:"translate("+i+","+s+")"}),M.tip.attr("class","horizontal "+a+" "+e)}function l(t,e){var o,r,n,i;"top"==t?(o=D.target.margins.offset.top<D.scroll.offset.top?z:D.target.offset.top,n="0"):(o=D.target.margins.offset.toBottom>D.scroll.offset.toBottom?D.scroll.offset.toBottom-z:D.target.offset.toBottom,n="-100%"),"right"==e?(r=D.target.offset.left+D.target.width,i="-100%"):"center"==e?(r=D.target.offset.left+D.target.width/2,i="-50%"):(r=D.target.offset.left,i="0"),M.wrap.css({left:r+"px",top:o+"px",transform:"translate("+i+","+n+")"}),M.tip.attr("class","hidden")}function f(){M.wrap.css({left:"50%",top:"50%",transform:"translate(-50%, -50%)",margin:"0"}),M.tip.attr("class","hidden")}var c=o.current.tour.steps[o.current.step];if(!M.target)return void f();var u={bottom:e,right:r,left:n,top:i},g=!1;return angular.forEach(c.placementPriority||b.placementPriority,function(t){!g&&u[t]()&&(g=!0)}),g||l("bottom","center"),t.when(null)}function x(){if(!M.target)return M.masks_top.css({height:b.mask.visibleOnNoTarget?"100%":"0px"}),M.masks_bottom.css({height:"0px"}),M.masks_left.css({top:"0px",height:"100%",width:"0px"}),M.masks_right.css({top:"0px",height:"100%",width:"0px"}),t.when(null);var e=b.highlightMargin?b.highlightMargin:0;return M.masks_top.css({height:D.target.offset.top-e+"px",top:D.target.offset.top<0?D.target.offset.top+"px":0}),M.masks_bottom.css({height:D.target.offset.fromBottom-e+"px",bottom:D.target.offset.fromBottom<0?D.target.offset.fromBottom+"px":0}),M.masks_left.css({top:D.target.offset.top-e+"px",height:D.target.height+2*e+"px",width:D.target.offset.left-e+"px"}),M.masks_right.css({top:D.target.offset.top-e+"px",height:D.target.height+2*e+"px",width:D.target.offset.fromRight-e+"px"}),b.disableInteraction&&M.masks_center.css({height:D.target.height+2*e+"px",top:D.target.offset.top-e+"px",left:D.target.offset.left-e+"px",right:D.target.offset.fromRight-e+"px",backgroundColor:"transparent"}),t.when(null)}var b=o.current.tour.config,k=!1,T=!1,z=15,B=120,y=250,_=!1,P=!0,E=null,M={window:angular.element(window),wrap:r.find("#nzTour-box-wrap"),box:r.find("#nzTour-box"),tip:r.find("#nzTour-tip"),step:r.find("#nzTour-step"),close:r.find("#nzTour-close"),content:r.find("#nzTour-content"),innerContent:r.find("#nzTour-inner-content"),actions:r.find("#nzTour-actions"),previous:r.find("#nzTour-previous"),next:r.find("#nzTour-next"),masks_wrap:r.find(".nzTour-masks"),masks_top:r.find(".nzTour-masks .top"),masks_right:r.find(".nzTour-masks .right"),masks_bottom:r.find(".nzTour-masks .bottom"),masks_left:r.find(".nzTour-masks .left"),masks_center:r.find(".nzTour-masks .center"),scroll:angular.element(b.scrollBox),target:!1},D={window:{},scroll:{},target:{}};s(!0),a(!0),M.masks_wrap.css("pointer-events",b.mask.clickThrough?"none":"all"),b.dark&&(M.box.addClass("dark-box"),z=7);var R=o.$on("step",g),L=o.throttle(c,16),S=o.debounce(u,100);0==b.disableHotkeys&&(M.window.bind("keydown",n),M.window.bind("resize scroll",L),window.addWheelListener(window,L),M.content.bind("scroll",l),window.addWheelListener(M.content[0],l),b.mask.scrollThrough===!1&&window.addWheelListener(M.masks_wrap[0],i)),o.cleanup=function(){R(),M.window.unbind("keydown",n),M.window.unbind("resize scroll",L),window.removeWheelListener(window,L),M.content.unbind("scroll",l),window.removeWheelListener(M.content[0],l),b.mask.scrollThrough===!1&&window.removeWheelListener(M.masks_wrap[0],i),M={},r.remove()},o.tryStop=function(){b.mask.clickExit&&o.stop()}}}}]),!window.addWheelListener){var i,s,a="";window.addEventListener?(i="addEventListener",_removeEventListener="removeEventListener"):(i="attachEvent",_removeEventListener="detachEvent",a="on"),s="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",window.addWheelListener=function(t,e,r){o(t,s,e,r),"DOMMouseScroll"==s&&o(t,"MozMousePixelScroll",e,r)},window.removeWheelListener=function(t,o,r){e(t,s,o,r),"DOMMouseScroll"==s&&e(t,"MozMousePixelScroll",o,r)}}}();