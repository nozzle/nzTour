!function(){function t(t,e,r,n){t[_removeEventListener](s+e,"wheel"==i?r:o,n||!1)}function e(t,e,r,a){t[n](s+e,"wheel"==i?r:o,a||!1)}function o(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==i?(e.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-1/40*t.wheelDeltaX)):e.deltaY=t.detail,callback(e)}var r=angular.module("nzTour",[]);if(r.factory("nzTour",["$q","$rootScope","$compile","$timeout",function(t,e,o,r){function n(t){if(!t)throw"No Tour Specified!";if(!t.steps.length)throw"No steps were found in that tour!";return k.current?i().then(function(){return c(t)}):c(t)}function i(){return p().then(function(){return u(!1)}).then(function(){return k.current.promise.reject(),k.current=!1,!0})}function s(){k.current&&v()}function a(){return k.current||k.current.reject(),p().then(m).then(function(){k.current.step++}).then(g)}function f(){return p().then(function(){return k.current.step>0?(k.current.step--,!0):t.reject()}).then(g)}function l(e){var o=t.defer();return e>0&&e<=k.current.tour.steps.length?p().then(function(){k.current.step=e-1}).then(g):(o.reject(),o.promise)}function c(e){e.config=angular.extendDeep({},k.config,e.config);var o=function(t){if(!angular.isArray(t))return!1;for(var e=0;e<t.length;e+=1)if(-1===k.config.placementPriority.indexOf(t[e]))return!1;return!0};return o(e.config.placementPriority)||(e.config.placementPriority=k.config.placementPriority),angular.forEach(e.steps,function(t){t.placementPriority&&(o(t.placementPriority)||delete t.placementPriority)}),k.current={tour:e,step:0,promise:t.defer()},u(!0,e),g(),k.current.promise.promise}function u(e,n){var i=t.defer();return e?(k.box=angular.element(o('<nz-tour class="hidden"></nz-tour>')(k)),angular.element(k.body).append(k.box),k.box.removeClass("hidden"),i.resolve()):(k.box.addClass("hidden"),r(function(){k.cleanup(),i.resolve()},k.current.tour.config.animationDuration)),i.promise}function g(){return h().then(d)}function h(){var e=t.defer();return k.current.tour.steps[k.current.step].before?k.current.tour.steps[k.current.step].before():(e.resolve(),e.promise)}function d(){var e=t.defer();return k.$broadcast("step",k.current.step),e.resolve(),e.promise}function p(){var e=t.defer();return k.current.tour.steps[k.current.step].after?k.current.tour.steps[k.current.step].after():(e.resolve(),e.promise)}function m(){var e=t.defer();return k.current.step==k.current.tour.steps.length-1&&(w(),e.reject()),e.resolve(),e.promise}function w(){u(!1).then(function(){return k.current.promise.resolve(),k.current=!1,!0})}function v(){}function x(t,e){var o=!1;return function(){o||(t.call(),o=!0,r(function(){o=!1},e))}}function b(t,e,o){var r;return function(){var n=this,i=arguments,s=function(){r=null,o||t.apply(n,i)},a=o&&!r;clearTimeout(r),r=setTimeout(s,e),a&&t.apply(n,i)}}var k=e.$new();return angular.extend(k,{config:{mask:{visible:!0,clickThrough:!1,clickExit:!1,scrollThrough:!0,color:"rgba(0,0,0,.7)"},dark:!1,scrollBox:-1!=navigator.userAgent.indexOf("AppleWebKit")?"body":"html",previousText:"Previous",nextText:"Next",finishText:"Finish",animationDuration:400,placementPriority:["bottom","right","top","left"],disableHotkeys:!1},current:!1,body:angular.element("body"),box:!1,start:n,stop:i,pause:s,next:a,previous:f,gotoStep:l,throttle:x,debounce:b}),window.nzTour=k,k}]),r.directive("nzTour",["$q","$timeout","$window",function(t,e,o){return{template:['<div id="nzTour-box-wrap">','   <div id="nzTour-box">','        <div id="nzTour-tip" class="top center"></div>','        <div id="nzTour-step">{{view.step + 1}}</div>','        <div id="nzTour-length">{{view.length}}</div>','        <div id="nzTour-close" ng-click="stop()">&#10005</div>','        <div id="nzTour-content">','           <div id="nzTour-inner-content"></div>',"        </div>",'        <div id="nzTour-actions">','            <button id="nzTour-previous" ng-show="view.step > 0" ng-click="previous()" class="ng-hide">{{view.previousText}}</button>','            <button id="nzTour-next" ng-show="view.step >= 0" ng-click="next()" class="success" class="ng-hide">{{view.nextText}}</button>',"        </div>","    </div>","</div>",'<div class="nzTour-masks" ng-show="current.tour.config.mask.visible" ng-click="tryStop()">','    <div class="mask top"></div>','    <div class="mask right"></div>','    <div class="mask bottom"></div>','    <div class="mask left"></div>',"</div>"].join(" "),link:function(e,o,r){function n(t){if(t.which>=49&&t.which<=57)return void e.gotoStep(t.which-48);switch(t.which){case 37:return e.previous(),void l(t);case 39:return e.next(),void l(t);case 27:return e.stop(),void l(t);case 38:case 40:return void P()}}function i(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}function s(t){var e=E.masks_top.add(E.masks_right).add(E.masks_bottom).add(E.masks_left);t?(D=!0,e.css("transition","all "+b.animationDuration+"ms ease")):(D=!1,e.css("transition","all 0"))}function a(t){var e=E.wrap.add(E.box).add(E.tip);t?e.css("transition","all "+b.animationDuration+"ms ease"):e.css("transition","all 0")}function f(t){var e;e="DOMMouseScroll"==t.type?-40*t.detail:t.wheelDelta;var o=e>0,r=E.content.scrollTop();return o&&!r?l(t):o||E.innerContent.height()-E.content.height()!=r?void 0:l(t)}function l(t){return t.stopPropagation(t),t.preventDefault(t),t.returnValue=!1,!1}function c(){T||(_=!0,s(!1),R(),h().then(d).then(p).then(d).then(w))}function u(){_=!1,s(!0)}function g(t,o){E.target=!1;var r=e.current.tour.steps;return e.view={step:o,length:r.length,previousText:b.previousText,nextText:o==r.length-1?b.finishText:b.nextText},E.innerContent.html(r[o].content),E.content.scrollTop(0),T=!0,h(o).then(d).then(p).then(d).then(w).then(function(){T=!1})}function h(o){var r=t.defer();if(E.target)r.resolve(k);else{var n=angular.element(e.current.tour.steps[o].target);n.length?(E.target=angular.element(n[0]),r.resolve(E.target)):r.resolve(!1)}return r.promise}function d(){var e=t.defer();return E.target?(M.window={width:E.window.width(),height:E.window.height()},M.scroll={width:E.scroll.outerWidth(),height:E.scroll.outerHeight(),offset:E.scroll.offset(),scroll:{top:E.scroll.scrollTop(),left:E.scroll.scrollLeft()}},angular.forEach(M.scroll.offset,function(t,e){M.scroll.offset[e]=Math.ceil(t)}),M.scroll.height=M.scroll.height+M.scroll.offset.top>M.window.height?M.window.height:M.scroll.height,M.scroll.width=M.scroll.width+M.scroll.offset.left>M.window.width?M.window.width:M.scroll.width,M.scroll.offset.toBottom=M.scroll.height+M.scroll.offset.top,M.scroll.offset.toRight=M.scroll.width+M.scroll.offset.left,M.scroll.offset.fromBottom=M.window.height-M.scroll.offset.top-M.scroll.height,M.scroll.offset.fromRight=M.window.width-M.scroll.offset.left-M.scroll.width,M.target={width:E.target.outerWidth(),height:E.target.outerHeight(),offset:E.target.offset()},("body"==b.scrollBox||"html"==b.scrollBox)&&(M.target.offset.top-=M.scroll.scroll.top),angular.forEach(M.target.offset,function(t,e){M.target.offset[e]=Math.ceil(t)}),M.target.offset.toBottom=M.target.offset.top+M.target.height,M.target.offset.toRight=M.target.offset.left+M.target.width,M.target.offset.fromBottom=M.window.height-M.target.offset.top-M.target.height,M.target.offset.fromRight=M.window.width-M.target.offset.left-M.target.width,M.target.margins={offset:{top:M.target.offset.top-z,left:M.target.offset.left-z,toBottom:M.target.offset.toBottom+z,toRight:M.target.offset.toRight+z,fromBottom:M.target.offset.fromBottom-z,fromRight:M.target.offset.fromRight-z},height:M.target.height+2*z,right:M.target.offset.fromRight+2*z},e.resolve(),e.promise):(e.resolve(),e.promise)}function p(){var e=t.defer();if(!E.target)return e.resolve(),e.promise;var o=m();return o?E.scroll.animate({scrollTop:o},_?0:b.animationDuration,function(){e.resolve()}):e.resolve(),e.promise}function m(){return M.target.margins.height>M.scroll.height?M.target.offset.toBottom-B<M.scroll.offset.top?M.scroll.scroll.top-(M.scroll.offset.top-(M.target.offset.toBottom-B)):M.target.offset.top+B>M.scroll.offset.toBottom?M.scroll.scroll.top+(M.target.offset.top+B-M.scroll.offset.toBottom):!1:M.target.margins.offset.top<M.scroll.offset.top?M.scroll.scroll.top-(M.scroll.offset.top-M.target.margins.offset.top):M.target.margins.offset.toBottom>M.scroll.offset.toBottom?M.scroll.scroll.top+(M.target.margins.offset.toBottom-M.scroll.offset.toBottom):!1}function w(){return t.all([v(),x()])}function v(){function o(){return M.target.margins.offset.fromBottom>B?M.target.width>y?(s("bottom","center"),!0):M.target.offset.fromRight+M.target.width>y?(s("bottom","left"),!0):(s("bottom","right"),!0):!1}function r(){return M.target.margins.offset.fromRight>y?M.target.margins.height>M.scroll.height?M.target.offset.top>M.window.height/2?(a("right","top"),!0):M.target.offset.fromBottom>M.window.height/2?(a("right","bottom"),!0):(a("right","center",!0),!0):M.target.height>B?(a("right","center"),!0):M.target.offset.fromBottom+M.target.height>B?(a("right","top"),!0):(a("right","bottom"),!0):!1}function n(){return M.target.margins.offset.left>y?M.target.margins.height>M.scroll.height?(a("left","center",!0),!0):M.target.height>B?(a("left","center"),!0):M.target.offset.fromBottom+M.target.height>B?(a("left","top"),!0):(a("left","bottom"),!0):!1}function i(){return M.target.margins.offset.top>B?M.target.width>y?(s("top","center"),!0):M.target.offset.fromRight+M.target.width>y?(s("top","left"),!0):(s("top","right"),!0):!1}function s(t,e){var o,r,n,i,s;"top"==t?(o=M.target.margins.offset.top,s="bottom",i="-100%"):(o=M.target.margins.offset.toBottom,s="top",i="0"),"right"==e?(r=M.target.offset.toRight,n="-100%"):"center"==e?(r=M.target.offset.left+M.target.width/2,n="-50%"):(r=M.target.offset.left,n="0"),E.wrap.css({left:r+"px",top:o+"px",transform:"translate("+n+","+i+")"}),E.tip.attr("class","vertical "+s+" "+e)}function a(t,e,o){var r,n,i,s,a;"right"==t?(n=M.target.margins.offset.toRight,a="left",i="0"):(n=M.target.margins.offset.left,a="right",i="-100%"),o?(r=M.window.height/2,s="-50%"):"top"==e?(r=M.target.offset.top,s="0"):"center"==e?(r=M.target.offset.top+M.target.height/2,s="-50%"):(r=M.target.offset.toBottom,s="-100%"),E.wrap.css({left:n+"px",top:r+"px",transform:"translate("+i+","+s+")"}),E.tip.attr("class","horizontal "+a+" "+e)}function f(t,e){var o,r,n,i;"top"==t?(o=M.target.margins.offset.top<M.scroll.offset.top?z:M.target.offset.top,n="0"):(o=M.target.margins.offset.toBottom>M.scroll.offset.toBottom?M.scroll.offset.toBottom-z:M.target.offset.toBottom,n="-100%"),"right"==e?(r=M.target.offset.left+M.target.width,i="-100%"):"center"==e?(r=M.target.offset.left+M.target.width/2,i="-50%"):(r=M.target.offset.left,i="0"),E.wrap.css({left:r+"px",top:o+"px",transform:"translate("+i+","+n+")"}),E.tip.attr("class","hidden")}function l(){E.wrap.css({left:"50%",top:"50%",transform:"translate(-50%, -50%)",margin:"0"}),E.tip.attr("class","hidden")}var c=e.current.tour.steps[e.current.step],u=t.defer();if(!E.target)return void l();var g={bottom:o,right:r,left:n,top:i},h=!1;return angular.forEach(c.placementPriority||b.placementPriority,function(t){!h&&g[t]()&&(h=!0,u.resolve())}),h?u.promise:(f("bottom","center"),void u.resolve())}function x(){var e=t.defer();return E.target?(E.masks_top.css({height:M.target.offset.top+"px",top:M.target.offset.top<0?M.target.offset.top+"px":0}),E.masks_bottom.css({height:M.target.offset.fromBottom+"px",bottom:M.target.offset.fromBottom<0?M.target.offset.fromBottom+"px":0}),E.masks_left.css({top:M.target.offset.top+"px",height:M.target.height+"px",width:M.target.offset.left+"px"}),E.masks_right.css({top:M.target.offset.top+"px",height:M.target.height+"px",width:M.target.offset.fromRight+"px"}),e.resolve(),e.promise):(E.masks_top.css({height:"0px"}),E.masks_bottom.css({height:"0px"}),E.masks_left.css({top:"0px",height:"100%",width:"0px"}),void E.masks_right.css({top:"0px",height:"100%",width:"0px"}))}var b=e.current.tour.config,k=!1,T=!1,z=15,B=120,y=250,_=!1,D=!0,E={window:angular.element(window),wrap:o.find("#nzTour-box-wrap"),box:o.find("#nzTour-box"),tip:o.find("#nzTour-tip"),step:o.find("#nzTour-step"),close:o.find("#nzTour-close"),content:o.find("#nzTour-content"),innerContent:o.find("#nzTour-inner-content"),actions:o.find("#nzTour-actions"),previous:o.find("#nzTour-previous"),next:o.find("#nzTour-next"),masks_wrap:o.find(".nzTour-masks"),masks_top:o.find(".nzTour-masks .top"),masks_right:o.find(".nzTour-masks .right"),masks_bottom:o.find(".nzTour-masks .bottom"),masks_left:o.find(".nzTour-masks .left"),scroll:angular.element(b.scrollBox),target:!1},M={window:{},scroll:{},target:{}};s(!0),a(!0),E.masks_wrap.css("pointer-events",b.mask.clickThrough?"none":"all"),b.dark&&(E.box.addClass("dark-box"),z=7),E.masks_top.add(E.masks_right).add(E.masks_bottom).add(E.masks_left).css({"background-color":b.mask.color});var L=e.$on("step",g),P=e.throttle(c,16),R=e.debounce(u,100);0==b.disableHotkeys&&(E.window.bind("keydown",n),E.window.bind("resize scroll",P),window.addWheelListener(window,P),E.content.bind("scroll",f),window.addWheelListener(E.content[0],f),b.mask.scrollThrough===!1&&window.addWheelListener(E.masks_wrap[0],i)),e.cleanup=function(){L(),E.window.unbind("keydown",n),E.window.unbind("resize scroll",P),window.removeWheelListener(window,P),E.content.unbind("scroll",f),window.removeWheelListener(E.content[0],f),b.mask.scrollThrough===!1&&window.removeWheelListener(E.masks_wrap[0],i),E={},o.remove()},window.tanner=e,e.tryStop=function(){b.mask.clickExit&&e.stop()}}}}]),window.angular.extendDeep=function a(t){return angular.forEach(arguments,function(e){e!==t&&angular.forEach(e,function(e,o){t[o]&&t[o].constructor&&t[o].constructor===Object?a(t[o],e):t[o]=e})}),t},!window.addWheelListener){var n,i,s="";window.addEventListener?(n="addEventListener",_removeEventListener="removeEventListener"):(n="attachEvent",_removeEventListener="detachEvent",s="on"),i="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",window.addWheelListener=function(t,o,r){e(t,i,o,r),"DOMMouseScroll"==i&&e(t,"MozMousePixelScroll",o,r)},window.removeWheelListener=function(e,o,r){t(e,i,o,r),"DOMMouseScroll"==i&&t(e,"MozMousePixelScroll",o,r)}}}();